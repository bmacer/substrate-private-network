{"ast":null,"code":"var _jsxFileName = \"/Users/bmacer/substrate-node-template/substrate-front-end-template/src/Upgrade.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Form, Input, Grid } from 'semantic-ui-react';\nimport { TxButton } from './substrate-lib/components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Main(props) {\n  _s();\n\n  const [status, setStatus] = useState('');\n  const [proposal, setProposal] = useState({});\n  const {\n    accountPair\n  } = props;\n\n  const bufferToHex = buffer => {\n    return Array.from(new Uint8Array(buffer)).map(b => b.toString(16).padStart(2, '0')).join('');\n  };\n\n  const handleFileChosen = file => {\n    const fileReader = new FileReader();\n\n    fileReader.onloadend = e => {\n      const content = bufferToHex(fileReader.result);\n      setProposal(`0x${content}`);\n    };\n\n    fileReader.readAsArrayBuffer(file);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Grid.Column, {\n    width: 8,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Upgrade Runtime\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      children: [/*#__PURE__*/_jsxDEV(Form.Field, {\n        children: /*#__PURE__*/_jsxDEV(Input, {\n          type: \"file\",\n          id: \"file\",\n          label: \"Wasm File\",\n          accept: \".wasm\",\n          onChange: e => handleFileChosen(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n        style: {\n          textAlign: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(TxButton, {\n          accountPair: accountPair,\n          label: \"Upgrade\",\n          type: \"UNCHECKED-SUDO-TX\",\n          setStatus: setStatus,\n          attrs: {\n            palletRpc: 'system',\n            callable: 'setCode',\n            inputParams: [proposal],\n            paramFields: [true]\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          overflowWrap: 'break-word'\n        },\n        children: status\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Main, \"BOMdWJuF0Nz08RKsRLWRCVuQFDo=\");\n\n_c = Main;\n\nvar _c;\n\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"sources":["/Users/bmacer/substrate-node-template/substrate-front-end-template/src/Upgrade.js"],"names":["React","useState","Form","Input","Grid","TxButton","Main","props","status","setStatus","proposal","setProposal","accountPair","bufferToHex","buffer","Array","from","Uint8Array","map","b","toString","padStart","join","handleFileChosen","file","fileReader","FileReader","onloadend","e","content","result","readAsArrayBuffer","target","files","textAlign","palletRpc","callable","inputParams","paramFields","overflowWrap"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,IAAT,EAAeC,KAAf,EAAsBC,IAAtB,QAAkC,mBAAlC;AACA,SAASC,QAAT,QAAyB,4BAAzB;;AAEA,eAAe,SAASC,IAAT,CAAeC,KAAf,EAAsB;AAAA;;AACnC,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBR,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACS,QAAD,EAAWC,WAAX,IAA0BV,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM;AAAEW,IAAAA;AAAF,MAAkBL,KAAxB;;AAEA,QAAMM,WAAW,GAAGC,MAAM,IAAI;AAC5B,WAAOC,KAAK,CAACC,IAAN,CAAW,IAAIC,UAAJ,CAAeH,MAAf,CAAX,EACJI,GADI,CACAC,CAAC,IAAIA,CAAC,CAACC,QAAF,CAAW,EAAX,EAAeC,QAAf,CAAwB,CAAxB,EAA2B,GAA3B,CADL,EAEJC,IAFI,CAEC,EAFD,CAAP;AAGD,GAJD;;AAMA,QAAMC,gBAAgB,GAAGC,IAAI,IAAI;AAC/B,UAAMC,UAAU,GAAG,IAAIC,UAAJ,EAAnB;;AACAD,IAAAA,UAAU,CAACE,SAAX,GAAuBC,CAAC,IAAI;AAC1B,YAAMC,OAAO,GAAGhB,WAAW,CAACY,UAAU,CAACK,MAAZ,CAA3B;AACAnB,MAAAA,WAAW,CAAE,KAAIkB,OAAQ,EAAd,CAAX;AACD,KAHD;;AAKAJ,IAAAA,UAAU,CAACM,iBAAX,CAA6BP,IAA7B;AACD,GARD;;AAUA,sBACE,QAAC,IAAD,CAAM,MAAN;AAAa,IAAA,KAAK,EAAE,CAApB;AAAA,4BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE,QAAC,IAAD;AAAA,8BACE,QAAC,IAAD,CAAM,KAAN;AAAA,+BACE,QAAC,KAAD;AACE,UAAA,IAAI,EAAC,MADP;AAEE,UAAA,EAAE,EAAC,MAFL;AAGE,UAAA,KAAK,EAAC,WAHR;AAIE,UAAA,MAAM,EAAC,OAJT;AAKE,UAAA,QAAQ,EAAEI,CAAC,IAAIL,gBAAgB,CAACK,CAAC,CAACI,MAAF,CAASC,KAAT,CAAe,CAAf,CAAD;AALjC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAUE,QAAC,IAAD,CAAM,KAAN;AAAY,QAAA,KAAK,EAAE;AAAEC,UAAAA,SAAS,EAAE;AAAb,SAAnB;AAAA,+BACE,QAAC,QAAD;AACE,UAAA,WAAW,EAAEtB,WADf;AAEE,UAAA,KAAK,EAAC,SAFR;AAGE,UAAA,IAAI,EAAC,mBAHP;AAIE,UAAA,SAAS,EAAEH,SAJb;AAKE,UAAA,KAAK,EAAE;AACL0B,YAAAA,SAAS,EAAE,QADN;AAELC,YAAAA,QAAQ,EAAE,SAFL;AAGLC,YAAAA,WAAW,EAAE,CAAC3B,QAAD,CAHR;AAIL4B,YAAAA,WAAW,EAAE,CAAC,IAAD;AAJR;AALT;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAVF,eAwBE;AAAK,QAAA,KAAK,EAAE;AAAEC,UAAAA,YAAY,EAAE;AAAhB,SAAZ;AAAA,kBAA6C/B;AAA7C;AAAA;AAAA;AAAA;AAAA,cAxBF;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AA+BD;;GApDuBF,I;;KAAAA,I","sourcesContent":["import React, { useState } from 'react';\nimport { Form, Input, Grid } from 'semantic-ui-react';\nimport { TxButton } from './substrate-lib/components';\n\nexport default function Main (props) {\n  const [status, setStatus] = useState('');\n  const [proposal, setProposal] = useState({});\n  const { accountPair } = props;\n\n  const bufferToHex = buffer => {\n    return Array.from(new Uint8Array(buffer))\n      .map(b => b.toString(16).padStart(2, '0'))\n      .join('');\n  };\n\n  const handleFileChosen = file => {\n    const fileReader = new FileReader();\n    fileReader.onloadend = e => {\n      const content = bufferToHex(fileReader.result);\n      setProposal(`0x${content}`);\n    };\n\n    fileReader.readAsArrayBuffer(file);\n  };\n\n  return (\n    <Grid.Column width={8}>\n      <h1>Upgrade Runtime</h1>\n      <Form>\n        <Form.Field>\n          <Input\n            type='file'\n            id='file'\n            label='Wasm File'\n            accept='.wasm'\n            onChange={e => handleFileChosen(e.target.files[0])}\n          />\n        </Form.Field>\n        <Form.Field style={{ textAlign: 'center' }}>\n          <TxButton\n            accountPair={accountPair}\n            label='Upgrade'\n            type='UNCHECKED-SUDO-TX'\n            setStatus={setStatus}\n            attrs={{\n              palletRpc: 'system',\n              callable: 'setCode',\n              inputParams: [proposal],\n              paramFields: [true]\n            }}\n          />\n        </Form.Field>\n        <div style={{ overflowWrap: 'break-word' }}>{status}</div>\n      </Form>\n    </Grid.Column>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}