{"ast":null,"code":"// Copyright 2017-2021 @polkadot/util authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nimport { formatDate } from \"./format/formatDate.mjs\";\nimport { isBn } from \"./is/bn.mjs\";\nimport { isBuffer } from \"./is/buffer.mjs\";\nimport { isFunction } from \"./is/function.mjs\";\nimport { isObject } from \"./is/object.mjs\";\nimport { isU8a } from \"./is/u8a.mjs\";\nimport { u8aToHex } from \"./u8a/toHex.mjs\";\nimport { u8aToU8a } from \"./u8a/toU8a.mjs\";\nconst logTo = {\n  debug: 'log',\n  error: 'error',\n  log: 'log',\n  warn: 'warn'\n};\n\nfunction formatOther(value) {\n  if (value && isObject(value) && value.constructor === Object) {\n    return Object.keys(value).reduce((result, key) => {\n      result[key] = format(value[key]);\n      return result;\n    }, {});\n  }\n\n  return value;\n}\n\nexport function format(value) {\n  if (Array.isArray(value)) {\n    return value.map(format);\n  } else if (isBn(value)) {\n    return value.toString();\n  } else if (isU8a(value) || isBuffer(value)) {\n    return u8aToHex(u8aToU8a(value));\n  }\n\n  return formatOther(value);\n}\n\nfunction apply(log, type, values, maxSize = -1) {\n  if (values.length === 1 && isFunction(values[0])) {\n    const fnResult = values[0]();\n    return apply(log, type, Array.isArray(fnResult) ? fnResult : [fnResult], maxSize);\n  }\n\n  console[logTo[log]](formatDate(new Date()), type, ...values.map(format).map(v => {\n    if (maxSize <= 0) {\n      return v;\n    }\n\n    const r = `${v}`;\n    return r.length < maxSize ? v : `${r.substr(0, maxSize)} ...`;\n  }));\n}\n\nfunction noop() {// noop\n}\n\nfunction parseEnv(type) {\n  var _process, _process$env, _process2, _process2$env;\n\n  const maxSize = parseInt(((_process = process) === null || _process === void 0 ? void 0 : (_process$env = _process.env) === null || _process$env === void 0 ? void 0 : _process$env.DEBUG_MAX) || '-1', 10);\n  return [(((_process2 = process) === null || _process2 === void 0 ? void 0 : (_process2$env = _process2.env) === null || _process2$env === void 0 ? void 0 : _process2$env.DEBUG) || '').toLowerCase().split(',').some(e => !!e && (e === '*' || type.startsWith(e))), isNaN(maxSize) ? -1 : maxSize];\n}\n/**\n * @name Logger\n * @summary Creates a consistent log interface for messages\n * @description\n * Returns a `Logger` that has `.log`, `.error`, `.warn` and `.debug` (controlled with environment `DEBUG=typeA,typeB`) methods. Logging is done with a consistent prefix (type of logger, date) followed by the actual message using the underlying console.\n * @example\n * <BR>\n *\n * ```javascript\n * import { logger } from '@polkadot';\n *\n * const l = logger('test');\n * ```\n */\n\n\nexport function logger(_type) {\n  const type = `${_type.toUpperCase()}:`.padStart(16);\n  const [isDebug, maxSize] = parseEnv(_type.toLowerCase());\n  return {\n    debug: isDebug ? (...values) => apply('debug', type, values, maxSize) : noop,\n    error: (...values) => apply('error', type, values),\n    log: (...values) => apply('log', type, values),\n    noop,\n    warn: (...values) => apply('warn', type, values)\n  };\n}","map":{"version":3,"sources":["/Users/bmacer/substrate-node-template/substrate-front-end-template/node_modules/@polkadot/util/logger.mjs"],"names":["formatDate","isBn","isBuffer","isFunction","isObject","isU8a","u8aToHex","u8aToU8a","logTo","debug","error","log","warn","formatOther","value","constructor","Object","keys","reduce","result","key","format","Array","isArray","map","toString","apply","type","values","maxSize","length","fnResult","console","Date","v","r","substr","noop","parseEnv","_process","_process$env","_process2","_process2$env","parseInt","process","env","DEBUG_MAX","DEBUG","toLowerCase","split","some","e","startsWith","isNaN","logger","_type","toUpperCase","padStart","isDebug"],"mappings":"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","sourcesContent":["// Copyright 2017-2021 @polkadot/util authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nimport { formatDate } from \"./format/formatDate.mjs\";\nimport { isBn } from \"./is/bn.mjs\";\nimport { isBuffer } from \"./is/buffer.mjs\";\nimport { isFunction } from \"./is/function.mjs\";\nimport { isObject } from \"./is/object.mjs\";\nimport { isU8a } from \"./is/u8a.mjs\";\nimport { u8aToHex } from \"./u8a/toHex.mjs\";\nimport { u8aToU8a } from \"./u8a/toU8a.mjs\";\nconst logTo = {\n  debug: 'log',\n  error: 'error',\n  log: 'log',\n  warn: 'warn'\n};\n\nfunction formatOther(value) {\n  if (value && isObject(value) && value.constructor === Object) {\n    return Object.keys(value).reduce((result, key) => {\n      result[key] = format(value[key]);\n      return result;\n    }, {});\n  }\n\n  return value;\n}\n\nexport function format(value) {\n  if (Array.isArray(value)) {\n    return value.map(format);\n  } else if (isBn(value)) {\n    return value.toString();\n  } else if (isU8a(value) || isBuffer(value)) {\n    return u8aToHex(u8aToU8a(value));\n  }\n\n  return formatOther(value);\n}\n\nfunction apply(log, type, values, maxSize = -1) {\n  if (values.length === 1 && isFunction(values[0])) {\n    const fnResult = values[0]();\n    return apply(log, type, Array.isArray(fnResult) ? fnResult : [fnResult], maxSize);\n  }\n\n  console[logTo[log]](formatDate(new Date()), type, ...values.map(format).map(v => {\n    if (maxSize <= 0) {\n      return v;\n    }\n\n    const r = `${v}`;\n    return r.length < maxSize ? v : `${r.substr(0, maxSize)} ...`;\n  }));\n}\n\nfunction noop() {// noop\n}\n\nfunction parseEnv(type) {\n  var _process, _process$env, _process2, _process2$env;\n\n  const maxSize = parseInt(((_process = process) === null || _process === void 0 ? void 0 : (_process$env = _process.env) === null || _process$env === void 0 ? void 0 : _process$env.DEBUG_MAX) || '-1', 10);\n  return [(((_process2 = process) === null || _process2 === void 0 ? void 0 : (_process2$env = _process2.env) === null || _process2$env === void 0 ? void 0 : _process2$env.DEBUG) || '').toLowerCase().split(',').some(e => !!e && (e === '*' || type.startsWith(e))), isNaN(maxSize) ? -1 : maxSize];\n}\n/**\n * @name Logger\n * @summary Creates a consistent log interface for messages\n * @description\n * Returns a `Logger` that has `.log`, `.error`, `.warn` and `.debug` (controlled with environment `DEBUG=typeA,typeB`) methods. Logging is done with a consistent prefix (type of logger, date) followed by the actual message using the underlying console.\n * @example\n * <BR>\n *\n * ```javascript\n * import { logger } from '@polkadot';\n *\n * const l = logger('test');\n * ```\n */\n\n\nexport function logger(_type) {\n  const type = `${_type.toUpperCase()}:`.padStart(16);\n  const [isDebug, maxSize] = parseEnv(_type.toLowerCase());\n  return {\n    debug: isDebug ? (...values) => apply('debug', type, values, maxSize) : noop,\n    error: (...values) => apply('error', type, values),\n    log: (...values) => apply('log', type, values),\n    noop,\n    warn: (...values) => apply('warn', type, values)\n  };\n}"]},"metadata":{},"sourceType":"module"}