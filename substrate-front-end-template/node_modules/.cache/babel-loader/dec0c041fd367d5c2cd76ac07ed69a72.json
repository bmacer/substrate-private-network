{"ast":null,"code":"// Copyright 2017-2021 @polkadot/util authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nimport { isBigInt } from \"./is/bigInt.mjs\";\nimport { isUndefined } from \"./is/undefined.mjs\";\n\nfunction defaultGetId() {\n  return 'none';\n}\n\nfunction normalize(args) {\n  return JSON.stringify(args, (_, value) => isBigInt(value) ? value.toString() : value);\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nexport function memoize(fn, {\n  getInstanceId = defaultGetId\n} = {}) {\n  const cache = {};\n\n  const memoized = (...args) => {\n    const stringParams = normalize(args);\n    const instanceId = getInstanceId();\n\n    if (!cache[instanceId]) {\n      cache[instanceId] = {};\n    }\n\n    if (isUndefined(cache[instanceId][stringParams])) {\n      cache[instanceId][stringParams] = fn(...args);\n    }\n\n    return cache[instanceId][stringParams];\n  };\n\n  memoized.unmemoize = (...args) => {\n    const stringParams = normalize(args);\n    const instanceId = getInstanceId();\n\n    if (cache[instanceId] && !isUndefined(cache[instanceId][stringParams])) {\n      delete cache[instanceId][stringParams];\n    }\n  };\n\n  return memoized;\n}","map":{"version":3,"sources":["/Users/bmacer/substrate-node-template/substrate-front-end-template/node_modules/@polkadot/util/memoize.mjs"],"names":["isBigInt","isUndefined","defaultGetId","normalize","args","JSON","stringify","_","value","toString","memoize","fn","getInstanceId","cache","memoized","stringParams","instanceId","unmemoize"],"mappings":"AAAA;AACA;AACA,SAASA,QAAT,QAAyB,iBAAzB;AACA,SAASC,WAAT,QAA4B,oBAA5B;;AAEA,SAASC,YAAT,GAAwB;AACtB,SAAO,MAAP;AACD;;AAED,SAASC,SAAT,CAAmBC,IAAnB,EAAyB;AACvB,SAAOC,IAAI,CAACC,SAAL,CAAeF,IAAf,EAAqB,CAACG,CAAD,EAAIC,KAAJ,KAAcR,QAAQ,CAACQ,KAAD,CAAR,GAAkBA,KAAK,CAACC,QAAN,EAAlB,GAAqCD,KAAxE,CAAP;AACD,C,CAAC;;;AAGF,OAAO,SAASE,OAAT,CAAiBC,EAAjB,EAAqB;AAC1BC,EAAAA,aAAa,GAAGV;AADU,IAExB,EAFG,EAEC;AACN,QAAMW,KAAK,GAAG,EAAd;;AAEA,QAAMC,QAAQ,GAAG,CAAC,GAAGV,IAAJ,KAAa;AAC5B,UAAMW,YAAY,GAAGZ,SAAS,CAACC,IAAD,CAA9B;AACA,UAAMY,UAAU,GAAGJ,aAAa,EAAhC;;AAEA,QAAI,CAACC,KAAK,CAACG,UAAD,CAAV,EAAwB;AACtBH,MAAAA,KAAK,CAACG,UAAD,CAAL,GAAoB,EAApB;AACD;;AAED,QAAIf,WAAW,CAACY,KAAK,CAACG,UAAD,CAAL,CAAkBD,YAAlB,CAAD,CAAf,EAAkD;AAChDF,MAAAA,KAAK,CAACG,UAAD,CAAL,CAAkBD,YAAlB,IAAkCJ,EAAE,CAAC,GAAGP,IAAJ,CAApC;AACD;;AAED,WAAOS,KAAK,CAACG,UAAD,CAAL,CAAkBD,YAAlB,CAAP;AACD,GAbD;;AAeAD,EAAAA,QAAQ,CAACG,SAAT,GAAqB,CAAC,GAAGb,IAAJ,KAAa;AAChC,UAAMW,YAAY,GAAGZ,SAAS,CAACC,IAAD,CAA9B;AACA,UAAMY,UAAU,GAAGJ,aAAa,EAAhC;;AAEA,QAAIC,KAAK,CAACG,UAAD,CAAL,IAAqB,CAACf,WAAW,CAACY,KAAK,CAACG,UAAD,CAAL,CAAkBD,YAAlB,CAAD,CAArC,EAAwE;AACtE,aAAOF,KAAK,CAACG,UAAD,CAAL,CAAkBD,YAAlB,CAAP;AACD;AACF,GAPD;;AASA,SAAOD,QAAP;AACD","sourcesContent":["// Copyright 2017-2021 @polkadot/util authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nimport { isBigInt } from \"./is/bigInt.mjs\";\nimport { isUndefined } from \"./is/undefined.mjs\";\n\nfunction defaultGetId() {\n  return 'none';\n}\n\nfunction normalize(args) {\n  return JSON.stringify(args, (_, value) => isBigInt(value) ? value.toString() : value);\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nexport function memoize(fn, {\n  getInstanceId = defaultGetId\n} = {}) {\n  const cache = {};\n\n  const memoized = (...args) => {\n    const stringParams = normalize(args);\n    const instanceId = getInstanceId();\n\n    if (!cache[instanceId]) {\n      cache[instanceId] = {};\n    }\n\n    if (isUndefined(cache[instanceId][stringParams])) {\n      cache[instanceId][stringParams] = fn(...args);\n    }\n\n    return cache[instanceId][stringParams];\n  };\n\n  memoized.unmemoize = (...args) => {\n    const stringParams = normalize(args);\n    const instanceId = getInstanceId();\n\n    if (cache[instanceId] && !isUndefined(cache[instanceId][stringParams])) {\n      delete cache[instanceId][stringParams];\n    }\n  };\n\n  return memoized;\n}"]},"metadata":{},"sourceType":"module"}