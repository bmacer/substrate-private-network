{"ast":null,"code":"// Copyright 2017-2021 @polkadot/api-derive authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nimport { map } from '@polkadot/x-rxjs/operators';\nimport { memo } from \"../util/index.mjs\";\nexport function erasHistoric(instanceId, api) {\n  return memo(instanceId, withActive => api.queryMulti([api.query.staking.activeEra, api.query.staking.historyDepth]).pipe(map(([activeEraOpt, historyDepth]) => {\n    const result = [];\n    const max = historyDepth.toNumber();\n    const activeEra = activeEraOpt.unwrapOrDefault().index;\n    let lastEra = activeEra;\n\n    while (lastEra.gten(0) && result.length < max) {\n      if (lastEra !== activeEra || withActive === true) {\n        result.push(api.registry.createType('EraIndex', lastEra));\n      }\n\n      lastEra = lastEra.subn(1);\n    } // go from oldest to newest\n\n\n    return result.reverse();\n  })));\n}","map":{"version":3,"sources":["/Users/bmacer/substrate-node-template/substrate-front-end-template/node_modules/@polkadot/api-derive/staking/erasHistoric.mjs"],"names":["map","memo","erasHistoric","instanceId","api","withActive","queryMulti","query","staking","activeEra","historyDepth","pipe","activeEraOpt","result","max","toNumber","unwrapOrDefault","index","lastEra","gten","length","push","registry","createType","subn","reverse"],"mappings":"AAAA;AACA;AACA,SAASA,GAAT,QAAoB,4BAApB;AACA,SAASC,IAAT,QAAqB,mBAArB;AACA,OAAO,SAASC,YAAT,CAAsBC,UAAtB,EAAkCC,GAAlC,EAAuC;AAC5C,SAAOH,IAAI,CAACE,UAAD,EAAaE,UAAU,IAAID,GAAG,CAACE,UAAJ,CAAe,CAACF,GAAG,CAACG,KAAJ,CAAUC,OAAV,CAAkBC,SAAnB,EAA8BL,GAAG,CAACG,KAAJ,CAAUC,OAAV,CAAkBE,YAAhD,CAAf,EAA8EC,IAA9E,CAAmFX,GAAG,CAAC,CAAC,CAACY,YAAD,EAAeF,YAAf,CAAD,KAAkC;AAC7J,UAAMG,MAAM,GAAG,EAAf;AACA,UAAMC,GAAG,GAAGJ,YAAY,CAACK,QAAb,EAAZ;AACA,UAAMN,SAAS,GAAGG,YAAY,CAACI,eAAb,GAA+BC,KAAjD;AACA,QAAIC,OAAO,GAAGT,SAAd;;AAEA,WAAOS,OAAO,CAACC,IAAR,CAAa,CAAb,KAAmBN,MAAM,CAACO,MAAP,GAAgBN,GAA1C,EAA+C;AAC7C,UAAII,OAAO,KAAKT,SAAZ,IAAyBJ,UAAU,KAAK,IAA5C,EAAkD;AAChDQ,QAAAA,MAAM,CAACQ,IAAP,CAAYjB,GAAG,CAACkB,QAAJ,CAAaC,UAAb,CAAwB,UAAxB,EAAoCL,OAApC,CAAZ;AACD;;AAEDA,MAAAA,OAAO,GAAGA,OAAO,CAACM,IAAR,CAAa,CAAb,CAAV;AACD,KAZ4J,CAY3J;;;AAGF,WAAOX,MAAM,CAACY,OAAP,EAAP;AACD,GAhB2H,CAAtF,CAA3B,CAAX;AAiBD","sourcesContent":["// Copyright 2017-2021 @polkadot/api-derive authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nimport { map } from '@polkadot/x-rxjs/operators';\nimport { memo } from \"../util/index.mjs\";\nexport function erasHistoric(instanceId, api) {\n  return memo(instanceId, withActive => api.queryMulti([api.query.staking.activeEra, api.query.staking.historyDepth]).pipe(map(([activeEraOpt, historyDepth]) => {\n    const result = [];\n    const max = historyDepth.toNumber();\n    const activeEra = activeEraOpt.unwrapOrDefault().index;\n    let lastEra = activeEra;\n\n    while (lastEra.gten(0) && result.length < max) {\n      if (lastEra !== activeEra || withActive === true) {\n        result.push(api.registry.createType('EraIndex', lastEra));\n      }\n\n      lastEra = lastEra.subn(1);\n    } // go from oldest to newest\n\n\n    return result.reverse();\n  })));\n}"]},"metadata":{},"sourceType":"module"}